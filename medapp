import React, { useState, useCallback } from 'react';
// Tailwind CSSëŠ” í™˜ê²½ì— ë”°ë¼ ìë™ìœ¼ë¡œ ë¡œë“œëœë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.

// --- 1. Lucide ì•„ì´ì½˜ ì •ì˜ (ì¬ì‚¬ìš©ì„ ìœ„í•´ ì»´í¬ë„ŒíŠ¸í™”) ---

const Home = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
    </svg>
);

const Plus = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <line x1="12" y1="5" x2="12" y2="19"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
    </svg>
);

const Calendar = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="16" y1="2" x2="16" y2="6"></line>
        <line x1="8" y1="2" x2="8" y2="6"></line>
        <line x1="3" y1="10" x2="21" y2="10"></line>
    </svg>
);

const Settings = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <circle cx="12" cy="12" r="3"></circle>
        <path d="M12 1v6m0 6v6m9-9h-6m-6 0H3m15.4-5.4l-4.24 4.24M9.83 9.83l-4.24-4.24m11.31 11.31l-4.24-4.24M9.83 14.17l-4.24 4.24"></path>
    </svg>
);

const Bell = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
    </svg>
);

const Check = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <polyline points="20 6 9 17 4 12"></polyline>
    </svg>
);

const Camera = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
        <circle cx="12" cy="13" r="4"></circle>
    </svg>
);

const MapPin = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
        <circle cx="12" cy="10" r="3"></circle>
    </svg>
);

const Phone = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
    </svg>
);

const Brain = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"></path>
        <path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"></path>
    </svg>
);

const Award = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <circle cx="12" cy="8" r="7"></circle>
        <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
    </svg>
);

const Pill = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <path d="m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z"></path>
        <path d="m8.5 8.5 7 7"></path>
    </svg>
);

const X = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
);

const ChevronRight = (props) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" {...props}>
        <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
);

// --- 2. Custom Confirm Modal ì»´í¬ë„ŒíŠ¸ ---

const ConfirmModal = ({ isOpen, onClose, onConfirm, medicineName, isSenior }) => {
    if (!isOpen) return null;

    const modalClass = isSenior ? 'p-10' : 'p-8';
    const titleClass = isSenior ? 'text-3xl mb-6' : 'text-2xl mb-4';
    const textClass = isSenior ? 'text-xl mb-8' : 'text-base mb-6';
    const buttonClass = isSenior ? 'py-5 text-xl' : 'py-3 text-lg';

    return (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
            <div className={`bg-white rounded-3xl ${modalClass} max-w-sm w-full shadow-2xl text-center`}>
                <X className={`mx-auto mb-4 text-red-500 ${isSenior ? 'w-10 h-10' : 'w-8 h-8'}`} />
                <h3 className={`font-bold text-red-600 ${titleClass}`}>
                    ì•½ ì‚­ì œ í™•ì¸
                </h3>
                <p className={`text-gray-700 ${textClass}`}>
                    ì •ë§ <span className="font-extrabold text-black">"{medicineName}"</span> ë³µì•½ ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
                </p>
                <div className="flex flex-col gap-3">
                    <button
                        onClick={onConfirm}
                        className={`w-full bg-red-600 text-white rounded-xl font-bold ${buttonClass} hover:bg-red-700 transition`}
                    >
                        ë„¤, ì‚­ì œí•©ë‹ˆë‹¤
                    </button>
                    <button
                        onClick={onClose}
                        className={`w-full bg-gray-200 text-gray-700 rounded-xl font-bold ${buttonClass} hover:bg-gray-300 transition`}
                    >
                        ì•„ë‹ˆìš”, ì·¨ì†Œí•©ë‹ˆë‹¤
                    </button>
                </div>
            </div>
        </div>
    );
};

// --- 3. ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»´í¬ë„ŒíŠ¸ ---

const App = () => {
    const [currentView, setCurrentView] = useState('onboarding');
    const [onboardingStep, setOnboardingStep] = useState(0);
    const [mode, setMode] = useState('basic');
    const [showAlarm, setShowAlarm] = useState(false);
    const [showQuiz, setShowQuiz] = useState(false);
    const [medicines, setMedicines] = useState([
        { id: 1, name: 'í˜ˆì••ì•½', time: '09:00', taken: true, streak: 7, dose: '1ì •' },
        { id: 2, name: 'ë‹¹ë‡¨ì•½', time: '12:00', taken: true, streak: 5, dose: '2ì •' },
        // ì´ ì•½ì´ ì²˜ìŒ ì•ŒëŒì˜ ëŒ€ìƒì´ ë©ë‹ˆë‹¤.
        { id: 3, name: 'ì†Œí™”ì œ', time: '18:00', taken: false, streak: 3, dose: '1ì •' } 
    ]);
    const [newMedicine, setNewMedicine] = useState({ name: '', time: '', dose: '' });

    // ì‚­ì œ í™•ì¸ ëª¨ë‹¬ ìƒíƒœ
    const [isConfirmModalOpen, setIsConfirmModalOpen] = useState(false);
    const [medicineToDelete, setMedicineToDelete] = useState(null);

    const isSenior = mode === 'senior';
    const takenCount = medicines.filter(m => m.taken).length;
    const maxStreak = Math.max(...medicines.map(m => m.streak));

    // í˜„ì¬ ë³µìš©í•´ì•¼ í•˜ëŠ” ì•½ (ê°€ì¥ ë¨¼ì € 'taken: false'ì¸ ì•½)ì„ í•œ ë²ˆë§Œ ê³„ì‚°í•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤.
    const medToTake = medicines.find(m => !m.taken);

    const onboardingSlides = [
        {
            icon: <Pill className="w-16 h-16" />,
            title: 'ì•½ ë³µìš© ê´€ë¦¬',
            description: 'ê°„í¸í•˜ê²Œ ì•½ì„ ì¶”ê°€í•˜ê³ \në³µìš© ì‹œê°„ì„ ê´€ë¦¬í•˜ì„¸ìš”'
        },
        {
            icon: <Bell className="w-16 h-16" />,
            title: 'ì •í™•í•œ ì•Œë¦¼',
            description: 'ë³µì•½ ì‹œê°„ì´ ë˜ë©´\n3ë‹¨ê³„ ì•Œë¦¼ìœ¼ë¡œ ì•Œë ¤ë“œë ¤ìš”'
        },
        {
            icon: <Award className="w-16 h-16" />,
            title: 'ë³µì•½ ê¸°ë¡',
            description: 'ë³µì•½ ìŠ¤íŠ¸ë¦­ê³¼ í†µê³„ë¡œ\nê±´ê°• ê´€ë¦¬ë¥¼ ë„ì™€ë“œë ¤ìš”'
        },
        {
            icon: <Brain className="w-16 h-16" />,
            title: 'ë‘ë‡Œ í›ˆë ¨',
            description: 'ì‹œë‹ˆì–´ ëª¨ë“œì—ì„œ\nì¸ì§€ í›ˆë ¨ í€´ì¦ˆë¥¼ ì œê³µí•´ìš”'
        }
    ];

    const takeMedicine = useCallback((id) => {
        setMedicines(medicines.map(m => 
            m.id === id ? { ...m, taken: true, streak: m.streak + 1 } : m
        ));
        setShowAlarm(false);
        setShowQuiz(false);
    }, [medicines]);

    const addMedicine = useCallback(() => {
        if (newMedicine.name && newMedicine.time) {
            setMedicines([...medicines, {
                id: Date.now(),
                name: newMedicine.name,
                time: newMedicine.time,
                dose: newMedicine.dose || '1ì •',
                taken: false,
                streak: 0
            }]);
            setNewMedicine({ name: '', time: '', dose: '' });
            setCurrentView('home');
        }
    }, [medicines, newMedicine]);

    // ì‚­ì œ ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬ (ëª¨ë‹¬ ì—´ê¸°)
    const handleDeleteClick = useCallback((med) => {
        setMedicineToDelete(med);
        setIsConfirmModalOpen(true);
    }, []);

    // ì‹¤ì œ ì‚­ì œ ë¡œì§ (ëª¨ë‹¬ í™•ì¸ í›„ ì‹¤í–‰)
    const confirmDeleteMedicine = useCallback(() => {
        if (medicineToDelete) {
            setMedicines(medicines.filter(m => m.id !== medicineToDelete.id));
            setIsConfirmModalOpen(false);
            setMedicineToDelete(null);
        }
    }, [medicines, medicineToDelete]);

    // ì˜¨ë³´ë”© í™”ë©´
    if (currentView === 'onboarding') {
        const slide = onboardingSlides[onboardingStep];
        const isLastSlide = onboardingStep === onboardingSlides.length - 1;

        return (
            <div className="min-h-screen bg-gradient-to-br from-blue-500 via-purple-600 to-pink-500 text-white flex flex-col items-center justify-center p-8 font-['Inter']">
                <div className="max-w-md w-full text-center">
                    <div className="bg-white/20 backdrop-blur-sm w-32 h-32 rounded-full flex items-center justify-center mx-auto mb-8 shadow-2xl">
                        {slide.icon}
                    </div>
                    
                    <h1 className="text-5xl font-bold mb-4">í•˜ë£¨ì•½ì†</h1>
                    <p className="text-xl opacity-90 mb-12">ë§¤ì¼ ê±´ê°•ì„ ì§€í‚¤ëŠ” ì•½ì†</p>

                    <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-8 mb-8">
                        <h2 className="text-2xl font-bold mb-4">{slide.title}</h2>
                        <p className="text-lg opacity-90 whitespace-pre-line">{slide.description}</p>
                    </div>

                    <div className="flex justify-center gap-2 mb-8">
                        {onboardingSlides.map((_, idx) => (
                            <div 
                                key={idx}
                                className={`w-2 h-2 rounded-full transition-all ${
                                    idx === onboardingStep ? 'bg-white w-8' : 'bg-white/40'
                                }`}
                            />
                        ))}
                    </div>

                    <button
                        onClick={() => {
                            if (isLastSlide) {
                                setCurrentView('home');
                            } else {
                                setOnboardingStep(onboardingStep + 1);
                            }
                        }}
                        className="w-full bg-white text-purple-600 py-4 rounded-xl text-xl font-bold shadow-xl hover:bg-gray-50 transition flex items-center justify-center gap-2 active:scale-[0.98]"
                    >
                        {isLastSlide ? 'ì‹œì‘í•˜ê¸°' : 'ë‹¤ìŒ'}
                        <ChevronRight className="w-6 h-6" />
                    </button>
                </div>
            </div>
        );
    }

    // ë©”ì¸ ì•± ë ˆì´ì•„ì›ƒ
    return (
        <div className={`min-h-screen bg-gray-50 ${isSenior ? 'text-lg' : ''} font-['Inter']`}>
            {/* í—¤ë” */}
            <div className="bg-white shadow-md sticky top-0 z-50">
                <div className="max-w-2xl mx-auto px-4 py-4 flex items-center justify-between">
                    <h1 className={`font-bold ${isSenior ? 'text-3xl text-purple-600' : 'text-2xl text-blue-600'}`}>
                        í•˜ë£¨ì•½ì†
                    </h1>
                    <button
                        onClick={() => setMode(mode === 'basic' ? 'senior' : 'basic')}
                        className={`px-4 py-2 rounded-full font-bold text-white shadow-md transition-colors active:scale-[0.98] ${
                            isSenior ? 'bg-purple-600 hover:bg-purple-700' : 'bg-blue-600 hover:bg-blue-700'
                        }`}
                    >
                        {isSenior ? 'ì‹œë‹ˆì–´' : 'ê¸°ë³¸'} ëª¨ë“œ
                    </button>
                </div>
            </div>

            {/* ì»¨í…ì¸  */}
            <div className="max-w-2xl mx-auto p-4 pb-24">
                {/* í™ˆ í™”ë©´ */}
                {currentView === 'home' && (
                    <>
                        {/* ì˜¤ëŠ˜ì˜ í˜„í™© ì¹´ë“œ */}
                        <div className={`rounded-3xl p-6 text-white mb-6 shadow-xl ${
                            isSenior 
                                ? 'bg-gradient-to-br from-purple-600 to-pink-500' 
                                : 'bg-gradient-to-br from-blue-500 to-purple-600'
                        }`}>
                            <div className="flex justify-between items-start mb-4">
                                <div>
                                    <h2 className={`font-bold mb-2 ${isSenior ? 'text-3xl' : 'text-xl'}`}>
                                        ì˜¤ëŠ˜ì˜ ë³µì•½
                                    </h2>
                                    <p className={isSenior ? 'text-xl' : 'text-sm'}>
                                        2025ë…„ 11ì›” 16ì¼
                                    </p>
                                </div>
                                <MapPin className={isSenior ? 'w-12 h-12' : 'w-8 h-8'} />
                            </div>
                            <div className="bg-white/20 backdrop-blur-sm rounded-xl p-4">
                                <p className={`mb-2 ${isSenior ? 'text-xl' : 'text-sm'}`}>í˜„ì¬ ìœ„ì¹˜</p>
                                <p className={`font-bold ${isSenior ? 'text-2xl' : 'text-lg'}`}>ğŸ  ì§‘</p>
                            </div>
                        </div>

                        {/* ë³µì•½ ìŠ¤íŠ¸ë¦­ (ê¸°ë³¸ ëª¨ë“œ ì „ìš©) */}
                        {!isSenior && (
                            <div className="bg-yellow-50 border-2 border-yellow-400 rounded-xl p-5 mb-6 shadow-md">
                                <div className="flex items-center gap-3 mb-2">
                                    <Award className="w-6 h-6 text-yellow-600" />
                                    <h3 className="text-lg font-bold">ë³µì•½ ìŠ¤íŠ¸ë¦­</h3>
                                </div>
                                <p className="text-3xl font-bold text-yellow-600 mb-1">
                                    {maxStreak}ì¼ ì—°ì†! ğŸ”¥
                                </p>
                                <p className="text-sm text-gray-600">ê³„ì†í•´ì„œ ê±´ê°•ì„ ì§€í‚¤ì„¸ìš”!</p>
                            </div>
                        )}

                        <h3 className={`font-bold mb-4 ${isSenior ? 'text-2xl' : 'text-lg'}`}>
                            ì˜¤ëŠ˜ì˜ ì•½ ({takenCount}/{medicines.length})
                        </h3>

                        {/* ì˜¤ëŠ˜ì˜ ì•½ ëª©ë¡ */}
                        {medicines.map(med => (
                            <div
                                key={med.id}
                                className={`rounded-xl p-4 mb-3 border-2 flex items-center gap-4 transition-all ${
                                    med.taken 
                                        ? 'bg-green-50 border-green-500 shadow-md' 
                                        : 'bg-white border-gray-200 shadow-sm'
                                } ${isSenior ? 'p-6' : ''}`}
                            >
                                <div className={`rounded-full flex items-center justify-center flex-shrink-0 ${
                                    med.taken ? 'bg-green-500' : 'bg-red-500 animate-pulse'
                                } ${isSenior ? 'w-16 h-16' : 'w-12 h-12'}`}>
                                    {med.taken ? (
                                        <Check className={`text-white ${isSenior ? 'w-8 h-8' : 'w-6 h-6'}`} />
                                    ) : (
                                        <Bell className={`text-white ${isSenior ? 'w-8 h-8' : 'w-6 h-6'}`} />
                                    )}
                                </div>
                                <div className="flex-1">
                                    <h4 className={`font-bold ${isSenior ? 'text-2xl mb-1' : 'text-lg'}`}>
                                        {med.name}
                                    </h4>
                                    <p className={`text-gray-600 ${isSenior ? 'text-xl' : 'text-sm'}`}>
                                        {med.time} Â· {med.dose}
                                    </p>
                                </div>
                                {!isSenior && (
                                    <div className="text-right">
                                        <div className="flex items-center justify-end gap-1 text-yellow-600 mb-1">
                                            <Award className="w-5 h-5" />
                                            <span className="font-bold">{med.streak}ì¼</span>
                                        </div>
                                        <p className="text-xs text-gray-500">ì—°ì† ë³µìš©</p>
                                    </div>
                                )}
                            </div>
                        ))}

                        {/* ì•ŒëŒ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ */}
                        <button
                            onClick={() => {
                                if (medToTake) { // ë³µìš©í•  ì•½ì´ ìˆì„ ë•Œë§Œ ì•ŒëŒ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
                                    setShowAlarm(true);
                                } else {
                                    // ì£¼ì˜: alert() ëŒ€ì‹  ë©”ì‹œì§€ ë°•ìŠ¤ ë˜ëŠ” ì»¤ìŠ¤í…€ ëª¨ë‹¬ì„ ì‚¬ìš©í•´ì•¼ í•˜ì§€ë§Œ,
                                    // í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì„ì‹œë¡œ alertì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
                                    // ì‹¤ì œ ì•±ì—ì„œëŠ” ì»¤ìŠ¤í…€ UIë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
                                    alert('ì˜¤ëŠ˜ ë³µìš©í•  ì•½ì´ ëª¨ë‘ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
                                }
                            }}
                            className={`w-full rounded-xl font-bold text-white flex items-center justify-center gap-2 shadow-lg mt-6 transition active:scale-[0.98] ${
                                medToTake ? 'bg-red-500 hover:bg-red-600' : 'bg-gray-400 cursor-not-allowed'
                            } ${
                                isSenior 
                                    ? 'py-6 text-xl' 
                                    : 'py-4 text-base'
                            }`}
                            disabled={!medToTake}
                        >
                            <Bell className={isSenior ? 'w-7 h-7' : 'w-5 h-5'} />
                            {medToTake ? 'ì•ŒëŒ í…ŒìŠ¤íŠ¸' : 'ì˜¤ëŠ˜ ë³µì•½ ì™„ë£Œ!'}
                        </button>
                    </>
                )}

                {/* ì•½ ì¶”ê°€ í™”ë©´ */}
                {currentView === 'add' && (
                    <>
                        {/* ì¹´ë©”ë¼ ì„¹ì…˜ */}
                        <div className={`bg-blue-50 border-2 border-blue-500 rounded-2xl text-center mb-6 shadow-lg ${
                            isSenior ? 'p-8' : 'p-6'
                        }`}>
                            <Camera className={`mx-auto mb-4 text-blue-600 ${isSenior ? 'w-16 h-16' : 'w-12 h-12'}`} />
                            <h3 className={`font-bold mb-3 ${isSenior ? 'text-2xl' : 'text-xl'}`}>
                                ì¹´ë©”ë¼ë¡œ ì´¬ì˜
                            </h3>
                            <p className={`text-gray-600 mb-4 ${isSenior ? 'text-xl' : 'text-base'}`}>
                                ì•½ ë´‰íˆ¬ë¥¼ ì´¬ì˜í•˜ë©´<br />ìë™ìœ¼ë¡œ ì •ë³´ë¥¼ ì¸ì‹í•©ë‹ˆë‹¤
                            </p>
                            <button className={`w-full rounded-xl font-bold text-white shadow-md hover:bg-blue-700 transition active:scale-[0.98] ${
                                isSenior 
                                    ? 'bg-purple-600 py-6 text-xl' 
                                    : 'bg-blue-600 py-4 text-base'
                            }`}>
                                ğŸ“· ì´¬ì˜í•˜ê¸°
                            </button>
                        </div>

                        <div className="text-center my-6">
                            <span className={`inline-block bg-gray-200 rounded-full px-6 py-2 text-gray-600 ${
                                isSenior ? 'text-lg' : 'text-sm'
                            }`}>
                                ë˜ëŠ”
                            </span>
                        </div>

                        {/* ì§ì ‘ ì…ë ¥ ì„¹ì…˜ */}
                        <div className={`bg-white border-2 border-gray-200 rounded-xl shadow-lg ${isSenior ? 'p-6' : 'p-5'}`}>
                            <h3 className={`font-bold mb-4 ${isSenior ? 'text-xl' : 'text-lg'}`}>
                                ì§ì ‘ ì…ë ¥
                            </h3>
                            <input
                                type="text"
                                placeholder="ì•½ ì´ë¦„"
                                value={newMedicine.name}
                                onChange={(e) => setNewMedicine({...newMedicine, name: e.target.value})}
                                className={`w-full border-2 border-gray-200 rounded-lg mb-3 focus:border-blue-500 outline-none transition ${
                                    isSenior ? 'p-5 text-xl' : 'p-4 text-base'
                                }`}
                            />
                            <input
                                type="time"
                                value={newMedicine.time}
                                onChange={(e) => setNewMedicine({...newMedicine, time: e.target.value})}
                                className={`w-full border-2 border-gray-200 rounded-lg mb-3 focus:border-blue-500 outline-none transition ${
                                    isSenior ? 'p-5 text-xl' : 'p-4 text-base'
                                }`}
                            />
                            <input
                                type="text"
                                placeholder="ë³µìš©ëŸ‰ (ì˜ˆ: 1ì •)"
                                value={newMedicine.dose}
                                onChange={(e) => setNewMedicine({...newMedicine, dose: e.target.value})}
                                className={`w-full border-2 border-gray-200 rounded-lg mb-3 focus:border-blue-500 outline-none transition ${
                                    isSenior ? 'p-5 text-xl' : 'p-4 text-base'
                                }`}
                            />
                            <button
                                onClick={addMedicine}
                                className={`w-full bg-green-600 text-white rounded-xl font-bold shadow-md hover:bg-green-700 transition active:scale-[0.98] ${
                                    isSenior ? 'py-6 text-xl' : 'py-4 text-base'
                                }`}
                            >
                                ë“±ë¡í•˜ê¸°
                            </button>
                        </div>
                    </>
                )}

                {/* ê¸°ë¡ í™”ë©´ */}
                {currentView === 'record' && (
                    <>
                        {/* ì£¼ê°„ ë³µì•½ë¥  ì°¨íŠ¸ */}
                        <div className={`bg-white border-2 border-gray-200 rounded-xl mb-6 shadow-lg ${
                            isSenior ? 'p-8' : 'p-6'
                        }`}>
                            <h3 className={`font-bold mb-4 ${isSenior ? 'text-2xl' : 'text-lg'}`}>
                                ì´ë²ˆ ì£¼ ë³µì•½ë¥ 
                            </h3>
                            <div className="text-center mb-4">
                                <p className={`font-bold text-blue-600 ${isSenior ? 'text-6xl' : 'text-5xl'}`}>
                                    {Math.round((takenCount / medicines.length) * 100)}%
                                </p>
                            </div>
                            <div className="h-48 flex items-end justify-around gap-2 mb-4">
                                {['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'].map((day, idx) => {
                                    // ë” í˜„ì‹¤ì ì¸ ê°€ìƒ ë†’ì´ (50% ~ 100%)
                                    const height = 50 + (idx % 3) * 15 + Math.random() * 5; 
                                    return (
                                        <div key={idx} className="flex-1 flex flex-col items-center">
                                            <div 
                                                className={`w-full rounded-t-lg transition-all ${isSenior ? 'bg-blue-600' : 'bg-blue-500'}`}
                                                style={{ height: `${height}%` }}
                                            />
                                        </div>
                                    );
                                })}
                            </div>
                            <div className="flex justify-around">
                                {['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'].map(day => (
                                    <span key={day} className={`text-gray-600 font-medium ${isSenior ? 'text-base' : 'text-sm'}`}>
                                        {day}
                                    </span>
                                ))}
                            </div>
                        </div>

                        {/* ì•½ë³„ ë³µì•½ ê¸°ë¡ ìƒì„¸ */}
                        <h3 className={`font-bold mb-4 ${isSenior ? 'text-2xl' : 'text-lg'}`}>
                            ì•½ë³„ ë³µì•½ ê¸°ë¡
                        </h3>
                        {medicines.map(med => (
                            <div key={med.id} className={`bg-white border-2 border-gray-200 rounded-xl mb-3 shadow-sm ${
                                isSenior ? 'p-6' : 'p-4'
                            }`}>
                                <div className="flex justify-between items-center mb-3">
                                    <h4 className={`font-bold ${isSenior ? 'text-xl' : 'text-base'}`}>
                                        {med.name}
                                    </h4>
                                    <span className={`text-yellow-600 font-bold ${isSenior ? 'text-base' : 'text-sm'}`}>
                                        {med.streak}ì¼ ì—°ì†
                                    </span>
                                </div>
                                <div className="flex gap-1">
                                    {[...Array(14)].map((_, i) => (
                                        <div
                                            key={i}
                                            className={`flex-1 h-8 rounded transition-colors ${
                                                i < med.streak ? 'bg-green-500' : 'bg-gray-200'
                                            }`}
                                        />
                                    ))}
                                </div>
                            </div>
                        ))}
                    </>
                )}

                {/* ì„¤ì • í™”ë©´ */}
                {currentView === 'settings' && (
                    <>
                        {/* ëª¨ë“œ ì„¤ì • */}
                        <div className={`bg-white border-2 border-gray-200 rounded-xl mb-6 shadow-lg ${
                            isSenior ? 'p-6' : 'p-5'
                        }`}>
                            <h3 className={`font-bold mb-4 ${isSenior ? 'text-2xl' : 'text-lg'}`}>
                                ëª¨ë“œ ì„¤ì •
                            </h3>
                            <div className="flex justify-between items-center p-4 bg-gray-50 rounded-lg">
                                <div>
                                    <p className={`font-bold ${isSenior ? 'text-xl' : 'text-base'}`}>
                                        ì‹œë‹ˆì–´ ëª¨ë“œ
                                    </p>
                                    <p className={`text-gray-600 ${isSenior ? 'text-base' : 'text-sm'}`}>
                                        í° ê¸€ì”¨ì™€ ê°„í¸í•œ í™”ë©´
                                    </p>
                                </div>
                                <button
                                    onClick={() => setMode(mode === 'basic' ? 'senior' : 'basic')}
                                    className={`w-16 h-8 rounded-full relative transition shadow-inner ${
                                        isSenior ? 'bg-purple-600' : 'bg-gray-300'
                                    }`}
                                >
                                    <div className={`w-6 h-6 bg-white rounded-full absolute top-1 transition-all shadow-md ${
                                        isSenior ? 'right-1' : 'left-1'
                                    }`} />
                                </button>
                            </div>
                        </div>

                        {/* ì•½ ê´€ë¦¬ ì„¹ì…˜ */}
                        <div className={`bg-white border-2 border-gray-200 rounded-xl mb-6 shadow-lg ${
                            isSenior ? 'p-6' : 'p-5'
                        }`}>
                            <h3 className={`font-bold mb-4 ${isSenior ? 'text-2xl' : 'text-lg'}`}>
                                ë“±ë¡ëœ ì•½ ê´€ë¦¬
                            </h3>
                            {medicines.map(med => (
                                <div key={med.id} className="flex justify-between items-center p-4 bg-gray-50 rounded-lg mb-3">
                                    <div>
                                        <p className={`font-bold ${isSenior ? 'text-xl' : 'text-base'}`}>
                                            {med.name}
                                        </p>
                                        <p className={`text-gray-600 ${isSenior ? 'text-base' : 'text-sm'}`}>
                                            {med.time} Â· {med.dose}
                                        </p>
                                    </div>
                                    <button
                                        onClick={() => handleDeleteClick(med)} // ì»¤ìŠ¤í…€ ëª¨ë‹¬ í˜¸ì¶œ
                                        className="p-2 text-red-500 hover:bg-red-100 rounded-full transition active:scale-90"
                                    >
                                        <X className={`text-red-500 ${isSenior ? 'w-6 h-6' : 'w-5 h-5'}`} />
                                    </button>
                                </div>
                            ))}
                        </div>

                        {/* ì•± ì •ë³´ */}
                        <div className={`bg-white border-2 border-gray-200 rounded-xl shadow-lg ${
                            isSenior ? 'p-6' : 'p-5'
                        }`}>
                            <h3 className={`font-bold mb-3 ${isSenior ? 'text-2xl' : 'text-lg'}`}>
                                ì•± ì •ë³´
                            </h3>
                            <p className={`text-gray-600 mb-2 ${isSenior ? 'text-base' : 'text-sm'}`}>
                                ë²„ì „ 1.0.1 (UI ê°œì„ )
                            </p>
                            <p className={`text-gray-600 ${isSenior ? 'text-base' : 'text-sm'}`}>
                                Â© 2025 í•˜ë£¨ì•½ì† íŒ€
                            </p>
                        </div>
                    </>
                )}
            </div>

            {/* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */}
            <div className="fixed bottom-0 left-0 right-0 bg-white border-t-4 border-gray-100 shadow-2xl">
                <div className="max-w-2xl mx-auto flex justify-around p-3">
                    {[
                        { id: 'home', icon: Home, label: 'í™ˆ' },
                        { id: 'add', icon: Plus, label: 'ì•½ ì¶”ê°€' },
                        { id: 'record', icon: Calendar, label: 'ê¸°ë¡' },
                        { id: 'settings', icon: Settings, label: 'ì„¤ì •' }
                    ].map(({ id, icon: Icon, label }) => (
                        <button
                            key={id}
                            onClick={() => setCurrentView(id)}
                            className={`flex flex-col items-center gap-1 p-2 rounded-xl transition hover:bg-gray-50 active:scale-95 ${
                                currentView === id 
                                    ? isSenior ? 'text-purple-600' : 'text-blue-600'
                                    : 'text-gray-400'
                            }`}
                        >
                            <Icon className={isSenior ? 'w-8 h-8' : 'w-6 h-6'} />
                            <span className={`font-medium ${isSenior ? 'text-base' : 'text-xs'}`}>
                                {label}
                            </span>
                        </button>
                    ))}
                </div>
            </div>

            {/* ì•ŒëŒ ëª¨ë‹¬ */}
            {showAlarm && medToTake && ( // ë³µìš©í•  ì•½ì´ ìˆì„ ë•Œë§Œ ë Œë”ë§í•˜ë„ë¡ ì¡°ê±´ ì¶”ê°€
                <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
                    <div className="bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl">
                        <div className="text-center">
                            <div className="w-20 h-20 mx-auto mb-4 text-red-500 animate-pulse">
                                <Bell className="w-full h-full" />
                            </div>
                            <h3 className={`font-bold mb-4 ${isSenior ? 'text-4xl' : 'text-2xl'}`}>
                                ì•½ ë“œì‹¤ ì‹œê°„ì´ì—ìš”!
                            </h3>
                            
                            {/* medToTake ì •ë³´ë¥¼ ì‚¬ìš© */}
                            <p className={`font-bold mb-2 ${isSenior ? 'text-3xl' : 'text-xl'}`}>
                                {medToTake.name}
                            </p>
                            <p className={`text-gray-600 mb-2 ${isSenior ? 'text-2xl' : 'text-lg'}`}>
                                {medToTake.time}
                            </p>
                            <p className={`text-gray-500 mb-6 ${isSenior ? 'text-xl' : 'text-base'}`}>
                                {medToTake.dose}
                            </p>
                            
                        </div>

                        <button
                            onClick={() => {
                                // medToTakeì´ ì—†ì„ ê²½ìš° ë²„íŠ¼ ìì²´ê°€ ë¹„í™œì„±í™”ë˜ì§€ë§Œ, ë§Œì•½ì„ ëŒ€ë¹„í•´ í™•ì¸í•©ë‹ˆë‹¤.
                                if (medToTake) { 
                                    if (isSenior) {
                                        setShowAlarm(false);
                                        setShowQuiz(true);
                                    } else {
                                        takeMedicine(medToTake.id);
                                    }
                                }
                            }}
                            className={`w-full bg-green-600 text-white rounded-xl font-bold flex items-center justify-center gap-2 mb-3 hover:bg-green-700 transition active:scale-[0.98] ${
                                isSenior ? 'py-6 text-2xl' : 'py-4 text-lg'
                            }`}
                        >
                            <Check className={isSenior ? 'w-7 h-7' : 'w-5 h-5'} />
                            ì•½ ë¨¹ì—ˆì–´ìš”
                        </button>
                        <button
                            onClick={() => setShowAlarm(false)}
                            className={`w-full bg-gray-200 text-gray-700 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-gray-300 transition active:scale-[0.98] ${
                                isSenior ? 'py-5 text-xl' : 'py-3 text-base'
                            }`}
                        >
                            <X className={isSenior ? 'w-6 h-6' : 'w-5 h-5'} />
                            ë‚˜ì¤‘ì—
                        </button>

                        <div className="mt-6 pt-6 border-t-2 border-gray-200">
                            <p className={`text-gray-500 text-center mb-3 ${isSenior ? 'text-lg' : 'text-sm'}`}>
                                ì‘ë‹µ ë°©ë²•:
                            </p>
                            <div className="flex justify-center gap-6">
                                <div className="text-center">
                                    <Phone className="w-6 h-6 text-blue-600 mx-auto mb-1" />
                                    <p className={`text-gray-600 ${isSenior ? 'text-base' : 'text-xs'}`}>
                                        ì „í™” ì‘ë‹µ
                                    </p>
                                </div>
                                <div className="text-center">
                                    <Bell className="w-6 h-6 text-purple-600 mx-auto mb-1" />
                                    <p className={`text-gray-600 ${isSenior ? 'text-base' : 'text-xs'}`}>
                                        ìŒì„± ëª…ë ¹
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            )}

            {/* í€´ì¦ˆ ëª¨ë‹¬ (ì‹œë‹ˆì–´ ëª¨ë“œ) */}
            {showQuiz && medToTake && ( // ë³µìš©í•  ì•½ì´ ìˆì„ ë•Œë§Œ ë Œë”ë§í•˜ë„ë¡ ì¡°ê±´ ì¶”ê°€
                <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
                    <div className="bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl">
                        <div className="text-center">
                            <div className="w-20 h-20 mx-auto mb-4 text-purple-600">
                                <Brain className="w-full h-full" />
                            </div>
                            <h3 className={`font-bold mb-6 ${isSenior ? 'text-4xl' : 'text-2xl'}`}>
                                ì¸ì§€ í›ˆë ¨ í€´ì¦ˆ
                            </h3>
                            <p className={`mb-8 ${isSenior ? 'text-2xl' : 'text-lg'}`}>
                                ì§€ê¸ˆ ëª‡ ì‹œì— ì•½ì„ ë“œì‹œë‚˜ìš”? (ì •ë‹µ: {medToTake.time})
                            </p>
                        </div>
                        <input
                            type="text"
                            placeholder="ì˜ˆ: 9ì‹œ"
                            className={`w-full border-4 border-purple-600 rounded-xl text-center mb-4 focus:ring-4 focus:ring-purple-200 outline-none transition ${
                                isSenior ? 'p-5 text-2xl' : 'p-4 text-lg'
                            }`}
                        />
                        <button
                            onClick={() => {
                                // í€´ì¦ˆ ì™„ë£Œ í›„, í˜„ì¬ ë³µìš© ì¤‘ì¸ ì•½ì˜ IDë¥¼ ì‚¬ìš©í•´ ë³µìš© ì²˜ë¦¬
                                if (medToTake) {
                                    takeMedicine(medToTake.id);
                                }
                            }}
                            className={`w-full bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition active:scale-[0.98] ${
                                isSenior ? 'py-6 text-2xl' : 'py-4 text-lg'
                            }`}
                        >
                            í™•ì¸
                        </button>
                    </div>
                </div>
            )}
            
            {/* ì•½ ì‚­ì œ í™•ì¸ ëª¨ë‹¬ */}
            <ConfirmModal 
                isOpen={isConfirmModalOpen}
                onClose={() => setIsConfirmModalOpen(false)}
                onConfirm={confirmDeleteMedicine}
                medicineName={medicineToDelete ? medicineToDelete.name : ''}
                isSenior={isSenior}
            />
        </div>
    );
};

export default App;
```eof
